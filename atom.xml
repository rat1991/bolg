<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://rat1991.github.io</id>
    <title>Rat</title>
    <updated>2020-07-28T11:37:18.962Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://rat1991.github.io"/>
    <link rel="self" href="https://rat1991.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://rat1991.github.io/images/avatar.png</logo>
    <icon>https://rat1991.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Rat</rights>
    <entry>
        <title type="html"><![CDATA[Flytiger-Bizå‰ç«¯å¼€å‘æŒ‡å—]]></title>
        <id>https://rat1991.github.io/post/flytiger-biz-qian-duan-kai-fa-zhi-nan/</id>
        <link href="https://rat1991.github.io/post/flytiger-biz-qian-duan-kai-fa-zhi-nan/">
        </link>
        <updated>2020-06-15T12:39:20.000Z</updated>
        <content type="html"><![CDATA[<h2 id="ä¾§è¾¹èœå•åŠ¨æ€ç”Ÿæˆ">ä¾§è¾¹èœå•åŠ¨æ€ç”Ÿæˆ</h2>
<p>å‰ç«¯ç”Ÿæˆä¾§è¾¹èœå•éœ€è¦é€šè¿‡ <a href="http://192.172.9.142:3000/project/22/interface/api/260"><code>æ¥å£ /permit/permitMenu/listUserMenuTree</code></a>è·å–èœå•æ•°æ®å’Œæƒé™åˆ—è¡¨è¿›è¡Œç”Ÿæˆã€‚<br>
è€Œè°ƒç”¨<code>listUserMenuTreeæ¥å£</code>å‰éœ€è¦è°ƒç”¨<a href="">/selectDefaultTenant</a>æ¥è·å–é»˜è®¤ç§Ÿæˆ·ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-mermaid">   ç™»å½•æˆåŠŸ --&gt; è°ƒç”¨è·å–é»˜è®¤ç§Ÿæˆ· ---&gt; è°ƒç”¨è·å–èœå•æ•°æ®
</code></pre>
<p>è·å–åˆ°èœå•æ•°æ®åéœ€è¦å¯¹æ•°æ®è¿›è¡Œå¤„ç†ç”Ÿæˆå‰ç«¯è·¯ç”±ï¼ˆroutesï¼‰æ•°æ®ï¼Œå†æ ¹æ®è·¯ç”±routesæ•°æ®å»ç”Ÿæˆèœå•ç»„ä»¶ã€‚å…·ä½“ç”Ÿæˆæ€è·¯å¦‚ä¸‹ï¼š</p>
<pre><code class="language-javascript">/**
 * è¿‡æ»¤èœå•æ•°æ®
 * @param {Array} list -åå°è¿”å›çš„èœå•æ•°æ®
 * @param {Object} parent -ç¼“å­˜çˆ¶çº§å¯¹è±¡
 * @returns {Array}
 */
function sortUserMenus(list, parent) {
  const menus = []
  const access = []
  list.forEach(item =&gt; {
    if (item.category === 1) {
      if (item.children) {
        item.children = sortUserMenus(item.children, item)
      }
      menus.push(item)
    } else {
      access.push({ code: item.code, name: item.name })
    }
  })
  if (parent &amp;&amp; access.length) {
      // æŠŠè¿‡æ»¤å‡ºçš„æƒé™åˆ—è¡¨ä¿å­˜åœ¨çˆ¶èŠ‚ç‚¹
    parent['_access'] = access
  }
  return menus.length ? menus : null
}
</code></pre>
<p>ä»¥ä¸Šå‡½æ•°ä¸»è¦æ˜¯æŠ½ç¦»èœå•é¡µé¢è·¯ç”±çš„æƒé™åˆ—è¡¨ï¼Œå› ä¸ºåç«¯è¿”å›çš„æ•°æ®æ˜¯ä»¥èœå•å’Œé¡µé¢æŒ‰é’®æƒé™ä¸€èµ·çš„æ ‘å½¢ç»“æ„ï¼Œéœ€è¦å°†é¡µé¢æŒ‰é’®æƒé™æŠ½ç¦»å¤„ç†ã€‚</p>
<pre><code class="language-javascript">// ç¼“å­˜ç”Ÿæˆçš„é¡µé¢è·¯ç”±
let cacheRouters = []
/**
 * åˆå¹¶è·¯ç”±è·¯å¾„
 * @param  {...any} arg -è·¯å¾„å­—ç¬¦
 */
function resolvePath(...arg) {
  return arg.map(url =&gt; {
    return url.split('/').filter(v =&gt; v!=='').join('/')
  }).join('/')
}
/**
 * routesç”Ÿæˆå™¨
 * @param {*} menus -åç«¯å“åº”æ•°æ®
 * @param {*} parentPath -çˆ¶èŠ‚ç‚¹è·¯å¾„
 */
function routesGenerator(menus, parentPath='/') {
  return menus.map(item =&gt; {
    const isChild = item.children &amp;&amp; item.children.length
    const isTop = item.parentId === '0'
    const tpl = {
      path: resolvePath(parentPath, item.code),
      name: item.name,
      meta: {
        icon: item.icon || 'md-document',
        hideInMenu: false,
        notCache: true
      },
    }
    if (!isTop) {
      tpl.path = '/' + tpl.path
      tpl.name = item.code
      tpl.meta.title = item.name
      // requireAuthä¸ºtrueè¡¨æ˜è¯¥è·¯ç”±éœ€è¦æƒé™æ‰èƒ½è¿›å…¥
      tpl.meta.requireAuth = true
      // å°†æŒ‰é’®æƒé™åˆ—è¡¨æ”¾ç½®åœ¨å‰ç«¯è·¯ç”±çš„meta.authListå±æ€§ä¸Š
      if (item._access) {
        tpl.meta.authList = item._access.map(item =&gt; item.code)
      }
    }
    // åˆ¤æ–­è·¯å¾„æ˜¯å¦ä¸ºè·¯ç”±ç»„ä»¶è¿˜æ˜¯url
    if (item.isOpen) {
      tpl.meta.href = item.path
    } else {
      tpl.component = () =&gt; isTop 
      ? import('@/components/main') 
      : import(`@/view/module/${resolvePath(item.path)}.vue`)
    }
    // å¸¦æœ‰å­èŠ‚ç‚¹é€’å½’å¤„ç†
    if (isChild) {
      tpl.children = routesGenerator(item.children, tpl.path)
      tpl.redirect = tpl.children[0].path
    }
    return tpl
  })
}
/**
 * ä¸»è¦ä¸ºç”Ÿæˆçš„routesååŠ å…¥404é¡µé¢è·¯ç”±
 * @param {*} menus -åç«¯å“åº”æ•°æ®
 */
function createMenuRoutes(menus) {
  const unableCatchRoute = {
    path: '/404',
    name: 'error_404',
    meta: {
      hideInMenu: true
    },
    component: () =&gt; import('@/view/error-page/404.vue')
  }
  return [...routesGenerator(menus), unableCatchRoute]
}

function initRoutes(menus) {
  if (cacheRouters.length) return
  cacheRouters = createMenuRoutes(menus)
  router.onReady(() =&gt; {
    // å°†ç”Ÿæˆçš„routesæ•°æ®æ·»åŠ åœ¨å‰ç«¯è·¯ç”±è¡¨
    router.addRoutes(cacheRouters)
    routes.push(...cacheRouters)
    store.commit('setRoutesReady')
  })
}
</code></pre>
<p>é€šè¿‡è°ƒç”¨initRoutes()æ–¹æ³•å°†ç”Ÿæˆçš„routesæ•°æ®åŠ¨æ€åŠ è½½çš„è·¯ç”±ä¸­ã€‚<br>
æœ€åç”Ÿæˆçš„æ•°æ®å¦‚ä¸‹ï¼š<br>
<img src="https://rat1991.github.io/post-images/1592228665717.png" alt="" loading="lazy"><br>
å…¶ä¸­authListä¸ºå½“å‰è·¯ç”±çš„æŒ‰é’®æƒé™åˆ—è¡¨ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡é¡µé¢ç»„ä»¶å†…çš„this.$routeå»è·å–åˆ°å®ƒï¼Œä»è€Œå¯ä»¥æ ¹æ®åˆ—å‡ºçš„æƒé™å»æ§åˆ¶é¡µé¢æŒ‰é’®çš„å±•ç¤ºã€‚<br>
æƒé™åˆ—è¡¨ä¸­å¸¦æœ‰<strong>VIEWã€ADDã€EDITã€DELETEã€ENABLE</strong>ç­‰åˆ†åˆ«æŸ¥çœ‹ã€æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€ç¦ç”¨çš„æ ‡è¯†ï¼Œæ ¹æ®æ ‡è¯†å»æ§åˆ¶ç›¸åº”æƒé™çš„æŒ‰é’®æ˜¾ç¤ºã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹å¯é€šè¿‡å®šä¹‰å…¨å±€æ–¹æ³•å»ç»Ÿä¸€åˆ¤æ–­ï¼š</p>
<pre><code class="language-javascript">/**
 * æŒ‰é’®å…¨æ–°æ§åˆ¶
 *authorities å¤šä¸ªç”¨,å·éš”å¼€
 * v-show=&quot;$hasAuthority('systemUserCreate')&quot;
 * @param authorities
 * @returns {boolean}
 */
Object.defineProperty(Vue.prototype, '$hasAuthority', {
  value(authorities, isCustom) {
    if (!authorities) return false
    const { authList= [] } = this.$route.meta;
    if(!isCustom)  authorities = 'flytigerbutton' + authorities;
    return authList.toString().toLocaleLowerCase().indexOf(authorities.toLocaleLowerCase()) &gt; -1 ;
  },
  writable: false
})
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç¤¾äº¤åˆ†äº«é…ç½®]]></title>
        <id>https://rat1991.github.io/post/she-jiao-fen-xiang-pei-zhi/</id>
        <link href="https://rat1991.github.io/post/she-jiao-fen-xiang-pei-zhi/">
        </link>
        <updated>2020-06-15T12:27:54.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="å¾®ä¿¡åˆ†äº«">å¾®ä¿¡åˆ†äº«</h2>
<p>è°ƒç”¨å¾®ä¿¡JSSDKéœ€è¦å…ˆåš<a href="https://mp.weixin.qq.com/">å…¬ä¼—è´¦å·</a>é…ç½®ï¼Œç®€å•æ¥è¯´æœ‰ä»¥ä¸‹æ­¥éª¤:</p>
<ol>
<li>åœ¨è®¤è¯çš„å…¬ä¼—è´¦å·ä¸Šç»‘å®šä¸€ä¸ªå·²å¤‡æ¡ˆçš„åŸŸå</li>
<li>æ ¹æ®appIdå’ŒappSecretåœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®ç­¾åè·å–çš„æ–¹æ³•</li>
<li>åœ¨è¯¥è®¤è¯åŸŸåä¸‹çš„é¡µé¢è·å–æœåŠ¡å™¨ç­¾åï¼Œå¾—åˆ°appIdã€timestampã€nonceStrã€signatureå€¼</li>
</ol>
<p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ol>
<li>æ³¨å…¥<a href="https://res.wx.qq.com/open/js/jweixin-1.3.1.js">js-sdk</a></li>
<li>è°ƒç”¨wx.config()</li>
</ol>
<pre><code class="language-javascript">wx.config({
  debug: true, // å¼€å¯è°ƒè¯•æ¨¡å¼,è°ƒç”¨çš„æ‰€æœ‰apiçš„è¿”å›å€¼ä¼šåœ¨å®¢æˆ·ç«¯alertå‡ºæ¥ï¼Œè‹¥è¦æŸ¥çœ‹ä¼ å…¥çš„å‚æ•°ï¼Œå¯ä»¥åœ¨pcç«¯æ‰“å¼€ï¼Œå‚æ•°ä¿¡æ¯ä¼šé€šè¿‡logæ‰“å‡ºï¼Œä»…åœ¨pcç«¯æ—¶æ‰ä¼šæ‰“å°ã€‚
  appId: '', // å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†
  timestamp: , // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³
  nonceStr: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²
  signature: '',// å¿…å¡«ï¼Œç­¾å
  jsApiList: [] // å¿…å¡«ï¼Œéœ€è¦ä½¿ç”¨çš„JSæ¥å£åˆ—è¡¨
});
</code></pre>
]]></summary>
        <content type="html"><![CDATA[<h2 id="å¾®ä¿¡åˆ†äº«">å¾®ä¿¡åˆ†äº«</h2>
<p>è°ƒç”¨å¾®ä¿¡JSSDKéœ€è¦å…ˆåš<a href="https://mp.weixin.qq.com/">å…¬ä¼—è´¦å·</a>é…ç½®ï¼Œç®€å•æ¥è¯´æœ‰ä»¥ä¸‹æ­¥éª¤:</p>
<ol>
<li>åœ¨è®¤è¯çš„å…¬ä¼—è´¦å·ä¸Šç»‘å®šä¸€ä¸ªå·²å¤‡æ¡ˆçš„åŸŸå</li>
<li>æ ¹æ®appIdå’ŒappSecretåœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®ç­¾åè·å–çš„æ–¹æ³•</li>
<li>åœ¨è¯¥è®¤è¯åŸŸåä¸‹çš„é¡µé¢è·å–æœåŠ¡å™¨ç­¾åï¼Œå¾—åˆ°appIdã€timestampã€nonceStrã€signatureå€¼</li>
</ol>
<p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ol>
<li>æ³¨å…¥<a href="https://res.wx.qq.com/open/js/jweixin-1.3.1.js">js-sdk</a></li>
<li>è°ƒç”¨wx.config()</li>
</ol>
<pre><code class="language-javascript">wx.config({
  debug: true, // å¼€å¯è°ƒè¯•æ¨¡å¼,è°ƒç”¨çš„æ‰€æœ‰apiçš„è¿”å›å€¼ä¼šåœ¨å®¢æˆ·ç«¯alertå‡ºæ¥ï¼Œè‹¥è¦æŸ¥çœ‹ä¼ å…¥çš„å‚æ•°ï¼Œå¯ä»¥åœ¨pcç«¯æ‰“å¼€ï¼Œå‚æ•°ä¿¡æ¯ä¼šé€šè¿‡logæ‰“å‡ºï¼Œä»…åœ¨pcç«¯æ—¶æ‰ä¼šæ‰“å°ã€‚
  appId: '', // å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†
  timestamp: , // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³
  nonceStr: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²
  signature: '',// å¿…å¡«ï¼Œç­¾å
  jsApiList: [] // å¿…å¡«ï¼Œéœ€è¦ä½¿ç”¨çš„JSæ¥å£åˆ—è¡¨
});
&lt;!-- more --&gt;

</code></pre>
<ol start="3">
<li>è°ƒç”¨wx.ready()</li>
</ol>
<pre><code class="language-javascript">wx.ready(function(){
  // configä¿¡æ¯éªŒè¯åä¼šæ‰§è¡Œreadyæ–¹æ³•ï¼Œæ‰€æœ‰æ¥å£è°ƒç”¨éƒ½å¿…é¡»åœ¨configæ¥å£è·å¾—ç»“æœä¹‹åï¼Œconfigæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥å¦‚æœéœ€è¦åœ¨é¡µé¢åŠ è½½æ—¶å°±è°ƒç”¨ç›¸å…³æ¥å£ï¼Œåˆ™é¡»æŠŠç›¸å…³æ¥å£æ”¾åœ¨readyå‡½æ•°ä¸­è°ƒç”¨æ¥ç¡®ä¿æ­£ç¡®æ‰§è¡Œã€‚å¯¹äºç”¨æˆ·è§¦å‘æ—¶æ‰è°ƒç”¨çš„æ¥å£ï¼Œåˆ™å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸éœ€è¦æ”¾åœ¨readyå‡½æ•°ä¸­ã€‚
  var config = {
      title: title, // åˆ†äº«æ ‡é¢˜
      desc: desc, // åˆ†äº«æè¿°
      link: url, // åˆ†äº«é“¾æ¥ï¼ˆæœ€å¥½æ˜¯åå°JSå®‰å…¨åŸŸåï¼‰
      imgUrl: img, // åˆ†äº«å›¾æ ‡
      success: function(){
        console.log('wx config success');
      },
      cancel: function(){
        console.log('wx config cancel');
      }
  };
  wx.onMenuShareAppMessage(share);  // å¾®ä¿¡å¥½å‹
  wx.onMenuShareTimeline(share);  // æœ‹å‹åœˆ
  wx.onMenuShareQQ(share);  // QQ
  wx.onMenuShareQZone(share);  // QQç©ºé—´
  wx.onMenuShareWeibo(share);  // è…¾è®¯å¾®åš
});</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://rat1991.github.io/post/hello-gridea/</id>
        <link href="https://rat1991.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>