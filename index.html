<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    Rat
</title>
<link rel="shortcut icon" href="https://rat1991.github.io/favicon.ico?v=1595936272524">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://rat1991.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://rat1991.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://rat1991.github.io">
                <img class="avatar" src="https://rat1991.github.io/images/avatar.png?v=1595936272524" alt="">
            </a>
            <div class="site-title">
                <h1>
                    Rat
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://rat1991.github.io/post/flytiger-biz-qian-duan-kai-fa-zhi-nan/">
                        Flytiger-Bizå‰ç«¯å¼€å‘æŒ‡å—
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-06-15</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            ä¾§è¾¹èœå•åŠ¨æ€ç”Ÿæˆ
å‰ç«¯ç”Ÿæˆä¾§è¾¹èœå•éœ€è¦é€šè¿‡ æ¥å£ /permit/permitMenu/listUserMenuTreeè·å–èœå•æ•°æ®å’Œæƒé™åˆ—è¡¨è¿›è¡Œç”Ÿæˆã€‚
è€Œè°ƒç”¨listUserMenuTreeæ¥å£å‰éœ€è¦è°ƒç”¨/selectDefaultTenantæ¥è·å–é»˜è®¤ç§Ÿæˆ·ï¼Œæµç¨‹å¦‚ä¸‹ï¼š
   ç™»å½•æˆåŠŸ --&amp;gt; è°ƒç”¨è·å–é»˜è®¤ç§Ÿæˆ· ---&amp;gt; è°ƒç”¨è·å–èœå•æ•°æ®

è·å–åˆ°èœå•æ•°æ®åéœ€è¦å¯¹æ•°æ®è¿›è¡Œå¤„ç†ç”Ÿæˆå‰ç«¯è·¯ç”±ï¼ˆroutesï¼‰æ•°æ®ï¼Œå†æ ¹æ®è·¯ç”±routesæ•°æ®å»ç”Ÿæˆèœå•ç»„ä»¶ã€‚å…·ä½“ç”Ÿæˆæ€è·¯å¦‚ä¸‹ï¼š
/**
 * è¿‡æ»¤èœå•æ•°æ®
 * @param {Array} list -åå°è¿”å›çš„èœå•æ•°æ®
 * @param {Object} parent -ç¼“å­˜çˆ¶çº§å¯¹è±¡
 * @returns {Array}
 */
function sortUserMenus(list, parent) {
  const menus = []
  const access = []
  list.forEach(item =&amp;gt; {
    if (item.category === 1) {
      if (item.children) {
        item.children = sortUserMenus(item.children, item)
      }
      menus.push(item)
    } else {
      access.push({ code: item.code, name: item.name })
    }
  })
  if (parent &amp;amp;&amp;amp; access.length) {
      // æŠŠè¿‡æ»¤å‡ºçš„æƒé™åˆ—è¡¨ä¿å­˜åœ¨çˆ¶èŠ‚ç‚¹
    parent[&#39;_access&#39;] = access
  }
  return menus.length ? menus : null
}

ä»¥ä¸Šå‡½æ•°ä¸»è¦æ˜¯æŠ½ç¦»èœå•é¡µé¢è·¯ç”±çš„æƒé™åˆ—è¡¨ï¼Œå› ä¸ºåç«¯è¿”å›çš„æ•°æ®æ˜¯ä»¥èœå•å’Œé¡µé¢æŒ‰é’®æƒé™ä¸€èµ·çš„æ ‘å½¢ç»“æ„ï¼Œéœ€è¦å°†é¡µé¢æŒ‰é’®æƒé™æŠ½ç¦»å¤„ç†ã€‚
// ç¼“å­˜ç”Ÿæˆçš„é¡µé¢è·¯ç”±
let cacheRouters = []
/**
 * åˆå¹¶è·¯ç”±è·¯å¾„
 * @param  {...any} arg -è·¯å¾„å­—ç¬¦
 */
function resolvePath(...arg) {
  return arg.map(url =&amp;gt; {
    return url.split(&#39;/&#39;).filter(v =&amp;gt; v!==&#39;&#39;).join(&#39;/&#39;)
  }).join(&#39;/&#39;)
}
/**
 * routesç”Ÿæˆå™¨
 * @param {*} menus -åç«¯å“åº”æ•°æ®
 * @param {*} parentPath -çˆ¶èŠ‚ç‚¹è·¯å¾„
 */
function routesGenerator(menus, parentPath=&#39;/&#39;) {
  return menus.map(item =&amp;gt; {
    const isChild = item.children &amp;amp;&amp;amp; item.children.length
    const isTop = item.parentId === &#39;0&#39;
    const tpl = {
      path: resolvePath(parentPath, item.code),
      name: item.name,
      meta: {
        icon: item.icon || &#39;md-document&#39;,
        hideInMenu: false,
        notCache: true
      },
    }
    if (!isTop) {
      tpl.path = &#39;/&#39; + tpl.path
      tpl.name = item.code
      tpl.meta.title = item.name
      // requireAuthä¸ºtrueè¡¨æ˜è¯¥è·¯ç”±éœ€è¦æƒé™æ‰èƒ½è¿›å…¥
      tpl.meta.requireAuth = true
      // å°†æŒ‰é’®æƒé™åˆ—è¡¨æ”¾ç½®åœ¨å‰ç«¯è·¯ç”±çš„meta.authListå±æ€§ä¸Š
      if (item._access) {
        tpl.meta.authList = item._access.map(item =&amp;gt; item.code)
      }
    }
    // åˆ¤æ–­è·¯å¾„æ˜¯å¦ä¸ºè·¯ç”±ç»„ä»¶è¿˜æ˜¯url
    if (item.isOpen) {
      tpl.meta.href = item.path
    } else {
      tpl.component = () =&amp;gt; isTop 
      ? import(&#39;@/components/main&#39;) 
      : import(`@/view/module/${resolvePath(item.path)}.vue`)
    }
    // å¸¦æœ‰å­èŠ‚ç‚¹é€’å½’å¤„ç†
    if (isChild) {
      tpl.children = routesGenerator(item.children, tpl.path)
      tpl.redirect = tpl.children[0].path
    }
    return tpl
  })
}
/**
 * ä¸»è¦ä¸ºç”Ÿæˆçš„routesååŠ å…¥404é¡µé¢è·¯ç”±
 * @param {*} menus -åç«¯å“åº”æ•°æ®
 */
function createMenuRoutes(menus) {
  const unableCatchRoute = {
    path: &#39;/404&#39;,
    name: &#39;error_404&#39;,
    meta: {
      hideInMenu: true
    },
    component: () =&amp;gt; import(&#39;@/view/error-page/404.vue&#39;)
  }
  return [...routesGenerator(menus), unableCatchRoute]
}

function initRoutes(menus) {
  if (cacheRouters.length) return
  cacheRouters = createMenuRoutes(menus)
  router.onReady(() =&amp;gt; {
    // å°†ç”Ÿæˆçš„routesæ•°æ®æ·»åŠ åœ¨å‰ç«¯è·¯ç”±è¡¨
    router.addRoutes(cacheRouters)
    routes.push(...cacheRouters)
    store.commit(&#39;setRoutesReady&#39;)
  })
}

é€šè¿‡è°ƒç”¨initRoutes()æ–¹æ³•å°†ç”Ÿæˆçš„routesæ•°æ®åŠ¨æ€åŠ è½½çš„è·¯ç”±ä¸­ã€‚
æœ€åç”Ÿæˆçš„æ•°æ®å¦‚ä¸‹ï¼š

å…¶ä¸­authListä¸ºå½“å‰è·¯ç”±çš„æŒ‰é’®æƒé™åˆ—è¡¨ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡é¡µé¢ç»„ä»¶å†…çš„this.$routeå»è·å–åˆ°å®ƒï¼Œä»è€Œå¯ä»¥æ ¹æ®åˆ—å‡ºçš„æƒé™å»æ§åˆ¶é¡µé¢æŒ‰é’®çš„å±•ç¤ºã€‚
æƒé™åˆ—è¡¨ä¸­å¸¦æœ‰VIEWã€ADDã€EDITã€DELETEã€ENABLEç­‰åˆ†åˆ«æŸ¥çœ‹ã€æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€ç¦ç”¨çš„æ ‡è¯†ï¼Œæ ¹æ®æ ‡è¯†å»æ§åˆ¶ç›¸åº”æƒé™çš„æŒ‰é’®æ˜¾ç¤ºã€‚
ä¸€èˆ¬æƒ…å†µä¸‹å¯é€šè¿‡å®šä¹‰å…¨å±€æ–¹æ³•å»ç»Ÿä¸€åˆ¤æ–­ï¼š
/**
 * æŒ‰é’®å…¨æ–°æ§åˆ¶
 *authorities å¤šä¸ªç”¨,å·éš”å¼€
 * v-show=&amp;quot;$hasAuthority(&#39;systemUserCreate&#39;)&amp;quot;
 * @param authorities
 * @returns {boolean}
 */
Object.defineProperty(Vue.prototype, &#39;$hasAuthority&#39;, {
  value(authorities, isCustom) {
    if (!authorities) return false
    const { authList= [] } = this.$route.meta;
    if(!isCustom)  authorities = &#39;flytigerbutton&#39; + authorities;
    return authList.toString().toLocaleLowerCase().indexOf(authorities.toLocaleLowerCase()) &amp;gt; -1 ;
  },
  writable: false
})


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://rat1991.github.io/post/flytiger-biz-qian-duan-kai-fa-zhi-nan/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://rat1991.github.io/post/she-jiao-fen-xiang-pei-zhi/">
                        ç¤¾äº¤åˆ†äº«é…ç½®
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-06-15</time>
                    
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                    <div class="post-content-abstract">
                                        <h2 id="å¾®ä¿¡åˆ†äº«">å¾®ä¿¡åˆ†äº«</h2>
<p>è°ƒç”¨å¾®ä¿¡JSSDKéœ€è¦å…ˆåš<a href="https://mp.weixin.qq.com/">å…¬ä¼—è´¦å·</a>é…ç½®ï¼Œç®€å•æ¥è¯´æœ‰ä»¥ä¸‹æ­¥éª¤:</p>
<ol>
<li>åœ¨è®¤è¯çš„å…¬ä¼—è´¦å·ä¸Šç»‘å®šä¸€ä¸ªå·²å¤‡æ¡ˆçš„åŸŸå</li>
<li>æ ¹æ®appIdå’ŒappSecretåœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®ç­¾åè·å–çš„æ–¹æ³•</li>
<li>åœ¨è¯¥è®¤è¯åŸŸåä¸‹çš„é¡µé¢è·å–æœåŠ¡å™¨ç­¾åï¼Œå¾—åˆ°appIdã€timestampã€nonceStrã€signatureå€¼</li>
</ol>
<p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ol>
<li>æ³¨å…¥<a href="https://res.wx.qq.com/open/js/jweixin-1.3.1.js">js-sdk</a></li>
<li>è°ƒç”¨wx.config()</li>
</ol>
<pre><code class="language-javascript">wx.config({
  debug: true, // å¼€å¯è°ƒè¯•æ¨¡å¼,è°ƒç”¨çš„æ‰€æœ‰apiçš„è¿”å›å€¼ä¼šåœ¨å®¢æˆ·ç«¯alertå‡ºæ¥ï¼Œè‹¥è¦æŸ¥çœ‹ä¼ å…¥çš„å‚æ•°ï¼Œå¯ä»¥åœ¨pcç«¯æ‰“å¼€ï¼Œå‚æ•°ä¿¡æ¯ä¼šé€šè¿‡logæ‰“å‡ºï¼Œä»…åœ¨pcç«¯æ—¶æ‰ä¼šæ‰“å°ã€‚
  appId: '', // å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†
  timestamp: , // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³
  nonceStr: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²
  signature: '',// å¿…å¡«ï¼Œç­¾å
  jsApiList: [] // å¿…å¡«ï¼Œéœ€è¦ä½¿ç”¨çš„JSæ¥å£åˆ—è¡¨
});
</code></pre>

                                    </div>
                                    
                                            <a class="btn btn-text" href="https://rat1991.github.io/post/she-jiao-fen-xiang-pei-zhi/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://rat1991.github.io/post/hello-gridea/">
                        Hello Gridea
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2018-12-12</time>
                    
                        <a href="https://rat1991.github.io/tag/54mnUT9VW/" class="post-tag i-tag
                            i-tag-other_4">
            #Gridea
        </a>
                        
                </div>
                <div class="post-article">
                    
                        <a href="https://rat1991.github.io/post/hello-gridea/" class="post-feature-image" style="background-image:url(https://rat1991.github.io/post-images/hello-gridea.png) ">
                        </a>
                        
                            <div class="post-content">
                                
                                    <div class="post-content-abstract">
                                        <p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>

                                    </div>
                                    
                                            <a class="btn btn-text" href="https://rat1991.github.io/post/hello-gridea/">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- ç¿»é¡µ -->
                
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- ä¸ªäººä¿¡æ¯ -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://rat1991.github.io/images/avatar.png?v=1595936272524)">
        </div>
        <h1 class="id_card-title">
            Rat
        </h1>
        <h2 class="id_card-description">
            æ¸©æ•…è€ŒçŸ¥æ–°
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- å…¬å‘Šæ  -->
                        

                </div>
            </div>



            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://rat1991.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>